<div
  class="modal fade"
  #loginModal
  id="loginModal"
  tabindex="-1"
  role="dialog"
  aria-labelledby="loginModalLabel"
  aria-hidden="true"
>
  <div
    class="modal-dialog modal-dialog-centered {{
      showRegisterBox ? 'register-modal' : ''
    }}"
    role="document"
  >
    <div class="modal-content">
      <div class="modal-header">
        <h4
          class="modal-title"
          *ngIf="
            !showPhoneBox &&
            !showEmailBox &&
            !showRegisterBox &&
            !showForgotBox &&
            !showOTPBox &&
            !showResetpassword &&
            !showForgotPhoneBox
          "
          id="loginModalLabel"
        >
          Sign up/Log in
        </h4>
        <button
          type="button"
          class="close"
          (click)="closeModal()"
          aria-label="Close"
        >
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <!-- Modal Body -->
      <div class="modal-body">
        <div class="row">
          <!-- login-with-phone -->
          <div class="col-10 mx-auto" *ngIf="showPhoneBox">
              <app-phone-sign-in
              (backEvent)="backButton()"
              (closeModalEvent)="closeModal()"
              (forgetEvent)="openForgot()"
            >
            </app-phone-sign-in>
          </div>
         <!-- forgot-password-with-email -->
          <div class="col-10 mx-auto" *ngIf="showForgotBox">
            <div class="text-center">
              <h6 class="">Email</h6>
              <img
                src="assets/images/email-img.png"
                class="w-75 mt-3"
                alt=""
                loading="lazy"
              />
            </div>
            <div class="mt-4">
              <label>Email</label>
              <input
                #emailInput="ngModel"
                [(ngModel)]="emailForForgotPassword"
                name="email"
                type="text"
                placeholder="Enter Your Email"
                class="form-control"
                required
              />
            </div>
            <div class="mt-4">
              <button
                (click)="openOTP()"
                class="btn btn-dark w-100 py-2 rounded-2"
                [disabled]="!emailInput.value"
              >
                <ng-container *ngIf="!loading; else spinner">
                  Send OTP
                </ng-container>
                <ng-template #spinner>
                  <i class="fa fa-spinner fa-spin"></i> Sending...
                </ng-template>
              </button>
            </div>
          </div>
         <!-- forgot-password-with-phone -->
          <div class="col-10 mx-auto" *ngIf="showForgotPhoneBox">
            <div class="text-center">
              <h6 class="">Phone Number</h6>
              <img
                src="assets/images/email-img.png"
                class="w-75 mt-3"
                alt=""
                loading="lazy"
              />
            </div>
            <div class="mt-4">
              <label>Phone</label>
              <input
                #phoneInput="ngModel"
                [(ngModel)]="phoneNumber"
                name="phone"
                type="text"
                placeholder="Enter Your Phone"
                class="form-control"
                required
              />
            </div>
            <div class="mt-4">
              <button
                (click)="openOTPNumber()"
                class="btn btn-dark w-100 py-2 rounded-2"
                [disabled]="!phoneInput.value || loading"
              >
                <ng-container *ngIf="!loading; else spinner">
                  Send OTP
                </ng-container>
                <ng-template #spinner>
                  <i class="fa fa-spinner fa-spin"></i> Sending...
                </ng-template>
              </button>
            </div>
          </div>
          <!-- OTP-email-screen -->
          <div class="col-10 mx-auto" *ngIf="showOTPBox">
            <div class="text-center">
              <h6>Verify</h6>
              <img
                src="assets/images/verify-img.png"
                class="w-75 mt-3"
                alt="Verification Image"
                loading="lazy"
              />
            </div>
            <div class="mt-4">
              <p>
                Please type in the OTP code we sent to your email. It's an extra
                step to make sure it's really you and keep your account safe.
              </p>
              <span
                >Verification Code Sent to
                {{ this.emailForForgotPassword }}</span
              >
            </div>
            <div class="row mt-4">
              <div
                class="col-2"
                *ngFor="let otpInput of otpInputs; let i = index"
              >
                <input
                  #otpField
                  type="text"
                  class="form-control text-center"
                  maxlength="1"
                  (input)="onInputChange($event, i)"
                  (keydown.backspace)="onBackspace($event, i)"
                  (paste)="i === 0 ? onPaste($event) : null"
                />
              </div>
            </div>
            <div class="mt-4 text-center">
              <button
                (click)="verifyOTP()"
                class="btn btn-dark w-100 py-2 rounded-2"
                [disabled]="loading"
              >
                <ng-container *ngIf="!loading; else spinner">
                  Verify
                </ng-container>
                <ng-template #spinner>
                  <i class="fa fa-spinner fa-spin"></i> Verifying...
                </ng-template>
              </button>
              <span style="cursor: pointer" class="mt-3"
                >Didnâ€™t Receive OTP?</span
              >
              <h6
                (click)="resendCodeToEmail()"
                style="cursor: pointer"
                class="mt-3"
              >
                <ng-container *ngIf="!resending; else spinnerResending">
                  Resend Code
                </ng-container>
                <ng-template #spinnerResending>
                  <i class="fa fa-spinner fa-spin"></i> Resending...
                </ng-template>
              </h6>
             </div>
          </div>
          <!-- login-with-email -->
          <div class="col-10 mx-auto" *ngIf="showEmailBox">
            <app-email-sign-in
              (backEvent)="backButton()"
              (closeModalEvent)="closeModal()"
              (forgetEvent)="openForgotEmail()"
            >
            </app-email-sign-in>
          </div>
          <div class="col-10 mx-auto">
            <form
              [formGroup]="resetPassword"
              *ngIf="showResetpassword"
              (ngSubmit)="forgotPasswordChange()"
            >
              <div class="row">
                <div class="cur-pointer"></div>
                <div class="col-12 text-center">
                  <h6 class="fs-20">Reset Password</h6>
                  <img
                    src="assets/images/email-img.png"
                    class="w-50 mt-3"
                    alt=""
                  />
                </div>
              </div>
              <div class="mt-4">
                <label>Email</label>
                <input
                  type="text"
                  placeholder="Enter Your Email"
                  formControlName="email"
                  class="form-control"
                  
                />
                <div
                  *ngIf="
                    resetPassword.get('email')?.touched &&
                    resetPassword.get('email')?.invalid
                  "
                  class="text-danger"
                >
                  <small
                    *ngIf="resetPassword.get('email')?.errors?.['required']"
                    >Email is required.</small
                  >
                  <small *ngIf="resetPassword.get('email')?.errors?.['email']"
                    >Enter a valid email.</small
                  >
                </div>
              </div>
              <div class="mt-4">
                <label>Password</label>
                <input
                  type="password"
                  placeholder="Enter Your Password"
                  formControlName="password"
                  class="form-control"
                  
                />
                <div
                  *ngIf="
                    resetPassword.get('password')?.touched &&
                    resetPassword.get('password')?.invalid
                  "
                  class="text-danger"
                >
                  <small
                    *ngIf="resetPassword.get('password')?.errors?.['required']"
                    >password is required.</small
                  >
                  <small
                    *ngIf="resetPassword.get('password')?.errors?.['password']"
                    >Enter a valid password.</small
                  >
                </div>
              </div>
              <div class="mt-4">
                <label>Confirm Password</label>
                <input
                  type="password"
                  placeholder="Enter Your Password"
                  formControlName="password_confirmation"
                  class="form-control"
                  
                />
                <div
                  *ngIf="
                    resetPassword.get('password_confirmation')?.touched &&
                    resetPassword.get('password_confirmation')?.invalid
                  "
                  class="text-danger"
                >
                  <small
                    *ngIf="resetPassword.get('password_confirmation')?.errors?.['required']"
                    >Password is required.</small
                  >
                </div>
              </div>
              <div class="mt-4">
                <button
                  class="btn btn-dark w-100 py-2 rounded-2"
                  [disabled]="!isFormValidforgot() || loading"
                >
                  <ng-container *ngIf="!loading; else spinner">
                    Reset Password
                  </ng-container>
                  <ng-template #spinner>
                    <i class="fa fa-spinner fa-spin"></i> Reseting...
                  </ng-template>
                </button>
              </div>
            </form>
          </div>
          <!-- registration-screen -->
          <div class="col-11 mx-auto" *ngIf="showRegisterBox">
           <app-register
              (backEvent)="backButton()"
              (closeModalEvent)="closeModal()"
            >
            </app-register>
          </div>
          <!-- all-buttons-google-phone-email -->
          <div
            class="col-10 mx-auto"
            *ngIf="
              !showPhoneBox &&
              !showEmailBox &&
              !showRegisterBox &&
              !showForgotBox &&
              !showOTPBox &&
              !showForgotPhoneBox &&
              !showResetpassword
            "
          >
            <button
              class="btn btn-outline-dark btn-block py-2 rounded-2"
              (click)="googleSignIn()"
            >
              <img
                src="https://img.icons8.com/color/48/000000/google-logo.png"
                alt="Google"
                loading="lazy"
              />
              Continue with Google
            </button>
            <!-- <button class="btn btn-dark btn-block" style="border-radius: 18px;">
								<img src="https://img.icons8.com/ios-filled/50/ffffff/mac-os.png" alt="Apple" />
								Continue
								with Apple
							</button> -->
            <button
              class="btn btn-outline-dark btn-block py-2 rounded-2"
              (click)="openPhone()"
            >
              <i
                class="fas fa-phone fs-20 text-center d-block mb-1 fa-rotate-90 mr-3"
              ></i>
              Continue with Phone
            </button>
            <button
              class="btn btn-outline-dark btn-block py-2 rounded-2"
              (click)="openEmail()"
            >
              <i
                class="fas fa-envelope fs-20 text-center d-block mb-1 mr-3"
              ></i>
              Continue with Email
            </button>
            <span class="mt-3"
              >Don't have an account?
              <span
                class="for-link cur-pointer"
                (click)="openRegister()"
                >
                Register
                </span>
              </span
            >
            <p class="mt-5 text-center">
              By moving forward, you're agreeing to our
              <a href="#">Terms of Service</a> and recognizing that you've
              checked out our <a href="#">Privacy Policy</a> to understand how
              we handle your information.
            </p>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
